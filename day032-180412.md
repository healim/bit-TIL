## 데이터베이스 교재 261p~



SET SERVEROUTPUT ON  -- 오라클설정에서 아웃풋 기능 ON



-- IS, AS, DECRARE 쓰임을 구분할 수 있어야 할 듯



```
/* condition.sql */

SET serveroutput ON

DECLARE 
  vstate  NUMBER;
BEGIN
  vstate := 0; -- 대입연산자 := (자바에서 = ), plsql문
  -- 1이면 로그인 아니면 로그아웃을 출력
  IF VSTATE = 1 THEN -- 프로시져 안에서 IF 쓸 수 있음 
    DBMS_OUTPUT.PUT_LINE('로그인');
  ELSE 
    DBMS_OUTPUT.PUT_LINE('로그아웃');
  END IF; 
END;

/* IF 테스트 */
-- 테이블 생성
CREATE TABLE TEST_IF1(
  INAME NVARCHAR2(20),
  IDATE DATE DEFAULT SYSDATE
);
CREATE TABLE TEST_IF2(
  INAME NVARCHAR2(20),
  IDATE DATE DEFAULT SYSDATE
);

-- 프로시져 만들기
/*프로시져 이름 : P_IN_IF 
  프로시져로 인수가 1이면 IF1 테이블에 '프로시져1'를 INSERT
  프로시져로 인수가 2이면 IF2 테이블에 '프로시져2'를 INSERT
*/

CREATE OR REPLACE PROCEDURE P_IN_IF (
-- 인자
  PSTATE NUMBER
)
IS
BEGIN
  IF PSTATE = 1 THEN
    INSERT INTO TEST_IF1 (INAME) VALUES ('프로시져1'); 
  ELSE 
   INSERT INTO TEST_IF2 (INAME) VALUES ('프로시져2'); 
  END IF;
END; -- IS BEGIN END 가 기본 틀인가?

EXEC P_IN_IF(1);
SELECT * FROM TEST_IF1; 

EXEC P_IN_IF(2);
SELECT * FROM TEST_IF2; 

/* 다중조건 */
-- IS, AS, DECRARE 쓰임을 구분할 수 있어야 할 듯

DECLARE
  VSTATE NUMBER(1);
BEGIN
  -- VSTATE가 1이면 음악 출력
  -- VSTATE가 2이면 미술, 3은 체육
  VSTATE := 3; -- 값은 이걸로 넣어줌... DECLARE는 단순 테스트용인가?
  IF VSTATE = 1 THEN
    DBMS_OUTPUT.PUT_LINE('음악');
  ELSIF VSTATE = 2 THEN
   DBMS_OUTPUT.PUT_LINE('미술');
  ELSIF VSTATE = 3 THEN
   DBMS_OUTPUT.PUT_LINE('체육'); 
  END IF; 
END; 



```





```
/* 프로시져 : P_IN_CONDITION
   인수가 1-10사이면 CONDITION10에 11~20 CONDITION20, 21~30 CONDITION30
*/

CREATE OR REPLACE PROCEDURE P_IN_CONDITION(
  PSTATE NUMBER
)
IS
BEGIN
  IF 1 <= PSTATE AND PSTATE <= 10 THEN INSERT INTO TEST_CONDITION10(INAME) VALUES (PSTATE); 
  ELSIF PSTATE <= 20 THEN INSERT INTO TEST_CONDITION20(INAME) VALUES (PSTATE);
  ELSIF PSTATE <= 30 THEN INSERT INTO TEST_CONDITION30(INAME) VALUES (PSTATE);
  END IF;
END;

EXEC P_IN_CONDITION(10);
EXEC P_IN_CONDITION(20);
EXEC P_IN_CONDITION(30);

SELECT * FROM TEST_CONDITION10;
SELECT * FROM TEST_CONDITION20;
SELECT * FROM TEST_CONDITION30;

DROP TABLE TEST_CONDITION10;
```

실행 결과가 예상과 다르게 나옴, IF문 조건 판단이 잘못되고 있음

\(10, 20, 30으로 넣은 값이 모두 TEST\_CONDITION10으로 들어가고 있음\)

![](/assets/041201import.png)

